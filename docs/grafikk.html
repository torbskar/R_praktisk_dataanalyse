<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Veldig praktisk dataanalyse med R - 5&nbsp; Grafikk</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./deskriptive_tabeller.html" rel="next">
<link href="./oversikt_datasettet.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Veldig praktisk dataanalyse med R</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Grafikk</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Forord</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regsjonsanalyse_tolkning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Sosiologisk teori og regresjonsanalyse</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./innlesning_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Innlesning av data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./innlesning_stata.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Spesielt om data fra Stata og SPSS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./oversikt_datasettet.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Få oversikt over datasettet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grafikk.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Grafikk</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deskriptive_tabeller.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Deskriptive tabeller</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./omkode_factor.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Omkoding av factor-variable</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./omkode_labelled.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Omkoding av labelled-variable i innlesning fra Stata</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Grafikk</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.4.0     ✔ purrr   1.0.1
✔ tibble  3.1.8     ✔ dplyr   1.1.0
✔ tidyr   1.3.0     ✔ stringr 1.5.0
✔ readr   2.1.3     ✔ forcats 0.5.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
</div>
<p>Les inn datasettet abu89.rds med følgende kommando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>abu89 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/abu89.rds"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lag et stolpediagram som viser antall menn og kvinner i datasettet med følgende kommando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(abu89, <span class="fu">aes</span>(<span class="at">x=</span>female))<span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="grafikk_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For <code>geom_bar()</code> bruker ggplot automatisk antall for y-aksen hvis du ikke skriver noe annet. Merk at koden bare spesifiserer x-variabelen. Da antar ggplot at du vil ha antall observasjoner som høyde på stolpene. I det skjulte bruker ggplot en spesifikasjonen <code>y = ..count..</code> som altså gir antallet.</p>
<ol start="10" type="1">
<li><p>Lag plottet på nytt med andeler ved å spesifisere y som <code>..prop..</code> og sette <code>group = 1</code>. <code>aes( x = female, y = ..prop.., group = 1 )</code></p></li>
<li><p>Kanskje du heller vil ha prosent fremfor andeler? Prøv følgende: spesifiser y som <code>y = ..prop..*100</code> og så endre tekst på y-aksen med <code>labs()</code>. Altså multiplisere andelen med 100.</p></li>
</ol>
<p>For å lagre et plot til disk slik at du lett kan bruke det i f.eks. et Word dokument bruker vi funksjonen ggsave(). Inni parentesen skriver du filbanen der du vil lagre plottet, inkludert filhale for det formatet du vil bruke. Det mest praktiske vil ofte være png-format, så da slutter filnavnet på .png, så vil ggsave lagre i det formatet. Hvis du vil ha plottet i pdf-format lar du tilsvarende filnavnet slutte på .pdf.<br>
ggsave() lagrer det plottet som er i plotvinduet i Rstudio hvis du ikke ber om noe annet. En bedre løsning er å legge hele plottet i et eget objekt og så angi det objektet i ggsave(). Noe slikt:</p>
<p><code>dittplot &lt;- ggplot(…) + …  ggsave(dittplot, filename = "output/dittfilnavn.png")</code></p>
<ol start="12" type="1">
<li><p>Lagre figuren til output-mappen i png-format med funksjonen ggsave() og gi filen et passende navn. For publisering kreves det ofte høy kvalitet på bildefilen, som spesifiseres med antall piksler angitt ved dpi. Forhåndsvalgt oppløsning for ggsave er dpi=300 som stort sett er tilstrekkelig. Hvis du trenger annen oppløsningen kan du spesifisere dpi høyere eller lavere.</p></li>
<li><p>Lag en høyoppløslig versjon ved å legge til dpi = 600 inni parentesen for ggsave() og gi filen et passende navn.</p></li>
<li><p>Lag en tilsvarende figur som i første oppgave, men nå for klassebakgrunn: Bruk samme kode, men bytt ut variabelen female med klasse89.</p></li>
</ol>
<p>I mange tilfeller vil dataene allerede være aggregert til en tabell. R vil ikke vite forskjell på dette av seg selv. Da må du spesifisere at y-variabelen er kolonnen med høyden på stolpen. Prøv med datasettet til eksempel 3 til kapittel 1 i læreboka: music &lt;- read.csv(“data/chapter_1/eg01-03music.csv”)</p>
<ol start="15" type="1">
<li>Bruk ggplot som før, men med nye variabelnavn. For linjen med geom_bar() må du nå spesifisere at ggplot ikke skal regne ut noe selv slik den ellers gjør. geom_bar(stat = “identity”)</li>
</ol>
<p>1.5 Histogram 16. Bruk datasettet abu89 og lag et histogram som viser fordelingen av timelønn (time89). Tips: du må altså bytte ut variabelnavn og bruke en annen geom_*, nemlig geom_histogram() 17. Endre antall stolper ved å sette bins = og vurder om grover/fine inndeling er best. 18. Gjør om histogrammet til å vise tetthet ved å sette y = ..density.. 19. Legg til titler på aksene som du synes er best. 20. Gjør egne vurderinger på endelig utseende på Når du er fornøyd lagrer du plottet i output-mappen med et passende navn i png-format.</p>
<p>1.6 Boksplot 21. Lag et boksplot for timelønn. Endre da koden ved å bruke geom_boxplot() i stedet for geom_histogram() som du brukte over. Men sett nå time89 som y i stedet for x. 22. Boksplot er mest interessant for å sammenligne grupper. Lag et boksplot for hver verdi av klasse. Inni aes() setter du x = klasse89.</p>
<p>1.7 Tidsserieplot Noen data er tidsserier der vi ønsker å se utvikling over tid. Et dagsaktuelt tema er overdødelighet i ulike land i på grunn av Covid-pandemien. Prosjektet Human Mortality Database (https://www.mortality.org/ ) har laget et datasett som heter Short-term Mortality Fluctuations (STMF) som gir totale dødelighetsrater per uke fra år 2000 og fremover for 38 land. (I skrivende stund tilgjengelig frem til uke 43 i 2021). Et tilrettelagt datasett er lastet opp i Canvas med filnavnet stmf_prep.rds. Les inn datasettet med readRDS() og lagre det i et objekt stmf. For mer informasjon om datasettet, se hjemmesiden. Når man sammenligner total dødeligheten for land med tidligere år, så vil vi kunne se om siste år har en overdødelighet sammenlignet med disse. Datasettet inneholder tall for både totalt og for menn, kvinner, og ulike aldersgrupper per land. Det kan være lurt å ikke plotte alt på en gang. Lag først et plot for kun Norge siste to år. Bruk filter() til å velge begge kjønn, kun Norge og siste to år, og lagre det som et nytt objekt slik: nor &lt;- stmf %&gt;% filter(sex == “b”, age == “Total”, country_code == “NOR”, year &gt;= 2020)</p>
<p>Da kan du lage et linjediagram slik: ggplot(nor, aes(x = week, y = rate_total, col = as.factor(year))) + geom_line()</p>
<p>Merk at fargen settes etter variabelen year, og den er satt som as.factor() for å markere at det er kategorisk og ikke kontinuerlig fargeskala. 23. Kan man si så mye om utviklingen? Hva bør man sammenligne med? 24. Hvorfor tror du det kan være lurt å se på total dødelighet fremfor døde direkte av Covid?</p>
<p>Juster koden over slik at du får med alle år for Norge og lag linjediagrammet på nytt. I parentesen for aes() legger du til group = year for å få en linje per år. Uten det blir det bare tull. Variabel yr_ind er en kategorisk variabel for å markere årene 2020 og 2021. I aes() legger du også til color = yr_ind for å si at det skal være forskjellig farge etter denne indikatoren. Lag litt tykkere linjer ved å spesifisere size = .9 inni parentesen for geom_line(). Legg så til en ny linje (sett + før linjeskift) i koden for å bestemme fargene manuelt slik:<br>
scale_color_manual(values = c(“gray70”, “red”, “blue”), labels = c(“2000-2019”, “2020”, “2021”)) Du skal nå få et plot der alle årene før 2020 er grå, mens 2020 og 2021 er henholdsvis rød og blå. Argumentet labels = er til tegnforklaringen. 25. Hvordan har dødeligheten vært totalt i Norge i 2020 og 2021 sammenlignet foregående år? Kan du tenke deg noen grunner til dette resultatet? Nå kan du plotte flere land og sammenligne utviklingen. For å se hvilke som er tilgjengelige kjør følgende: unique(stmf$country_code) Juster koden du brukte til å lage datasettet for kun Norge slik at du får med fire valgfrie land. Du kan bruke %in% c(…) for velge flere verdier på landvariabelen. Her er et eksempel for å velge kun nordiske land: filter(country_code %in% c(“NOR”, “SWE”, “DNK”, “FIN”)) Nå kan du bruke samme kode for plottet, men legg til nederst (husk + før linjeskift) følgende: facet_wrap(~country_code) Denne koden gir et panel med et plot for hvert land slik at du lettere kan sammenligne. Hvis det er stor forskjell på nivået kan du la y-skalaen variere mellom landene ved å legge til scales = “free” inni parentesen for facet_wrap(). 26. Hvordan har dødeligheten vært i Norge under pandemien sammenlignet med de andre landende du valgte? 27. Gjør sammenligningen på nytt, men velg en annen aldersgruppe i stedet for totalt. 28. Bruk det du har lært om labs() og theme_*() til å gjøre plottet penere og lagre i output-mappen. Du kan også flytte tegnforklaringen ved å legge til følgende: theme(legend.position = “top”)</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./oversikt_datasettet.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Få oversikt over datasettet</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./deskriptive_tabeller.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Deskriptive tabeller</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>